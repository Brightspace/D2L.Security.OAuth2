
image: Visual Studio 2019

version: '{build}-{branch}'
environment:
  ASSEMBLY_VERSION: 10.3.0
  matrix:
    - TARGET_FRAMEWORK: net472
      SLN: D2L.Security.OAuth2.sln
    - TARGET_FRAMEWORK: net50
      SLN: D2L.Security.OAuth2.net50.sln

configuration: Release
platform: Any CPU

before_build:
  - dotnet restore %SLN%
  - nuget install Appveyor.TestLogger -Version 2.0.0

build_script:
  - dotnet build %SLN% --configuration %CONFIGURATION% --framework %TARGET_FRAMEWORK% --

test_script:
  - dotnet test %SLN% --configuration %CONFIGURATION% --framework %TARGET_FRAMEWORK% --no-build --logger AppVeyor --test-adapter-path .

artifacts:
- path: '**\*.nupkg'
  name: NuGet

branches:
  only:
    - master
    - /v\d*\.\d*\.\d*.\d*/
