
image: Visual Studio 2019

version: '{build}-{branch}'
environment:
  ASSEMBLY_VERSION: 10.3.0
  matrix:
    - TARGET_FRAMEWORK: net472
    - TARGET_FRAMEWORK: net50

configuration: Release
platform: Any CPU

before_build:
  - dotnet restore
  - nuget install Appveyor.TestLogger -Version 2.0.0

build_script:
  - dotnet build --configuration %CONFIGURATION% --framework %TARGET_FRAMEWORK%

test_script:
  - dotnet test --configuration %CONFIGURATION% --framework %TARGET_FRAMEWORK% --no-build --logger AppVeyor --test-adapter-path .

artifacts:
- path: '**\*.nupkg'
  name: NuGet

branches:
  only:
    - master
    - /v\d*\.\d*\.\d*.\d*/
